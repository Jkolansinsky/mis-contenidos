<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Publimpresto Screen Auto</title>
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#000000">
  <style>
   * {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  background: #000;
  height: 100vh;
  overflow: hidden;
  font-family: Arial, sans-serif;
}

#media-container {
  width: 100vw;
  height: 100vh;
  display: flex;
  justify-content: center;
  align-items: center;
  position: relative;
}

.media-item {
  width: 100%;
  height: 100%;
  object-fit: cover; /* ¡ESTA ES LA CLAVE! */
  object-position: center; /* Centra el contenido */
}

/* Para videos específicamente */
video {
  width: 100%;
  height: 100%;
  object-fit: cover;
  object-position: center;
}
    
    #loading {
      color: white;
      font-size: 1.2em;
    }
    
    #error {
      color: #ff6b6b;
      text-align: center;
      padding: 20px;
    }
  </style>
</head>
<body>
  <div id="media-container">
    <div id="loading">Cargando contenido...</div>
  </div>
  
  <script>
    // Configuración - CAMBIA ESTOS VALORES
    const GITHUB_USER = 'Jkolansinsky'; // Tu usuario de GitHub
    const REPO_NAME = 'mis-contenidos'; // Nombre de tu repositorio
    
    const container = document.getElementById('media-container');
    let mediaFiles = [];
    let currentIndex = 0;
    
    // Registrar Service Worker
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('/sw.js')
          .then(reg => console.log('SW registrado'))
          .catch(err => console.log('SW error:', err));
      });
    }
    
    // Obtener lista de archivos del repositorio
    async function fetchMediaFiles() {
      try {
        const response = await fetch(`https://api.github.com/repos/${GITHUB_USER}/${REPO_NAME}/contents`);
        const files = await response.json();
        
        if (files.message) {
          throw new Error(files.message);
        }
        
        // Filtrar solo imágenes y videos
        mediaFiles = files
          .filter(file => {
            const ext = file.name.split('.').pop().toLowerCase();
            return ['jpg', 'jpeg', 'png', 'gif', 'mp4', 'webm', 'mov'].includes(ext);
          })
          .map(file => file.download_url);
        
        if (mediaFiles.length > 0) {
          showMedia();
          // Cambiar automáticamente cada 10 segundos
          setInterval(nextMedia, 10000);
        } else {
          container.innerHTML = '<div id="loading">No hay archivos multimedia en la carpeta</div>';
        }
      } catch (error) {
        container.innerHTML = `
          <div id="error">
            <h3>Error al cargar contenido</h3>
            <p>Verifica que:</p>
            <p>• Usuario de GitHub: ${GITHUB_USER}</p>
            <p>• Repositorio: ${REPO_NAME}</p>
            <p>• GitHub Pages esté activado</p>
            <p>• Hayan archivos multimedia</p>
          </div>
        `;
        console.error('Error:', error);
      }
    }
    
    function showMedia() {
      container.innerHTML = '';
      const file = mediaFiles[currentIndex];
      const ext = file.split('.').pop().toLowerCase();
      
      if (['jpg', 'jpeg', 'png', 'gif'].includes(ext)) {
        const img = document.createElement('img');
        img.src = file;
        img.className = 'media-item';
        img.onload = () => console.log('Imagen cargada');
        img.onerror = () => console.log('Error al cargar imagen');
        container.appendChild(img);
      } else if (['mp4', 'webm', 'mov'].includes(ext)) {
        const video = document.createElement('video');
        video.src = file;
        video.autoplay = true;
        video.loop = true;
        video.muted = true;
        video.className = 'media-item';
        video.onloadeddata = () => console.log('Video cargado');
        video.onerror = () => console.log('Error al cargar video');
        container.appendChild(video);
      }
    }
    
    function nextMedia() {
      if (mediaFiles.length > 0) {
        currentIndex = (currentIndex + 1) % mediaFiles.length;
        showMedia();
      }
    }
    
    // Iniciar cuando la página cargue
    window.addEventListener('load', fetchMediaFiles);
  </script>
</body>
</html>

<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">
